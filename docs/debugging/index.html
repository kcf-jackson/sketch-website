<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Sketch Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Sketch Blog Atom Feed"><title data-react-helmet="true">Debugging | Sketch</title><meta data-react-helmet="true" property="og:url" content="https://kcf-jackson.github.io/docs/debugging"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Debugging | Sketch"><meta data-react-helmet="true" name="description" content="Converting R code to JavaScript code is an elaborate process, and things could go wrong in a few different places. We will explain below what some of the common error messages mean and how to debug a sketch application in general."><meta data-react-helmet="true" property="og:description" content="Converting R code to JavaScript code is an elaborate process, and things could go wrong in a few different places. We will explain below what some of the common error messages mean and how to debug a sketch application in general."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kcf-jackson.github.io/docs/debugging"><link data-react-helmet="true" rel="alternate" href="https://kcf-jackson.github.io/docs/debugging" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kcf-jackson.github.io/docs/debugging" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8ccdf222.css">
<link rel="preload" href="/assets/js/styles.d666402a.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.c1b8fcdf.js" as="script">
<link rel="preload" href="/assets/js/main.6fb23e32.js" as="script">
<link rel="preload" href="/assets/js/1.601f8a21.js" as="script">
<link rel="preload" href="/assets/js/2.f3d55e96.js" as="script">
<link rel="preload" href="/assets/js/96.67cd782d.js" as="script">
<link rel="preload" href="/assets/js/98.96910ac0.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.2c160cd6.js" as="script">
<link rel="preload" href="/assets/js/17896441.0a798033.js" as="script">
<link rel="preload" href="/assets/js/2bccb399.55198869.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><strong class="navbar__title">Sketch</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog/">News</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/tutorial/">Tutorial</a><a class="navbar__item navbar__link" href="/showcase/">Showcase</a><a class="navbar__item navbar__link" href="/api/">API</a><a href="https://github.com/kcf-jackson/sketch" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">Sketch</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/blog/">News</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorial/">Tutorial</a></li><li class="menu__list-item"><a class="menu__link" href="/showcase/">Showcase</a></li><li class="menu__list-item"><a class="menu__link" href="/api/">API</a></li><li class="menu__list-item"><a href="https://github.com/kcf-jackson/sketch" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration">Configuration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manage_assets_and_deployment">Managing assets and Deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developing JavaScript in R</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/r-to-js-transpilation">Transpiling R to JavaScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pitfalls">Pitfalls</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides">JavaScript / CSS libraries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dom">The DOM module</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/R6-OOP">Object-Oriented Programming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/websocket">WebSocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/customisation">Customisation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usage_with_Rmarkdown">Usage with R Markdown documents</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usage_with_shiny">Usage with Shiny</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/about">About</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Debugging</h1></header><div class="markdown"><p>Converting R code to JavaScript code is an elaborate process, and things could go wrong in a few different places. We will explain below what some of the common error messages mean and how to debug a <strong>sketch</strong> application in general.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pre-transpilation-check"></a>Pre-transpilation check<a class="hash-link" href="#pre-transpilation-check" title="Direct link to heading">#</a></h2><p>The transpiler comes with a safeguard which performs some check before the transpilation begins. The safeguard checks whether the reserved words are used as variables. The reserved words referred to here cover more than the standard reserved words (like <code>function</code>, <code>if</code>, <code>for</code>, etc.) and include some of the R functions provided by the &quot;base&quot; package. For example, the word <code>max</code> refers to the max function, and it cannot be used as variable. When one tries to use the word <code>max</code> as variable, or function arguments, <strong>sketch</strong> would issue warnings like the following:</p><blockquote><p>Warning messages:<br>
In check_assignment(ast, reserved_words) :<br>
You assigned a value to the reserved word &#x27;max&#x27; in the following expression:<br>
max &lt;- 10</p></blockquote><blockquote><p>Warning message:<br>
In .f(.x[[i]], ...) :<br>
You used the reserved word &#x27;max&#x27; as the function argument name in the following expression:<br>
function(max) { print(max) }</p></blockquote><p>This is a limitation of transpilation via static code analysis. To circumvent the issue, one could either rename the variable to some other names (say <code>max0</code> or <code>max_fun</code>) or switch off the rewriting rule for the word <code>max</code>. The detail of the latter approach is discussed in the <a href="/docs/customisation">customisation</a> page.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="transpilation-warning"></a>Transpilation warning<a class="hash-link" href="#transpilation-warning" title="Direct link to heading">#</a></h2><p>There are a couple of rules to follow for a successful transpilation.</p><ol><li>Arguments provided to <code>list</code> must be fully named. An expression like <code>list(1, x = 2)</code> would trigger a warning:</li></ol><blockquote><p>In .f(.x[[i]], .y[[i]], ...) :<br>
All elements in a list must be named to convert into JavaScript properly.</p></blockquote><ol start="2"><li>When <code>default_2_deparsers()</code> is used, the last expression of the function (i.e. the default return value) must be a value, not a statement. Specifically, it cannot be an assignment-statement, if-statement, or a for/while-loop. The expression <code>f &lt;- function() x &lt;- 3</code> would trigger:</li></ol><blockquote><p>Warning in is_valid_add(last_expr, ...) :<br>
You have used an assignment statement as the final expression in:<br>
var x = 3<br>
Note that automatic explicit return only applies to standalone values but not statements.</p></blockquote><p>while the expression <code>g &lt;- function() if (TRUE) 1 else 2</code> would trigger:</p><blockquote><p>Warning in is_valid_add(last_expr, ...) :<br>
You have used a control-flow statement as the final expression in:<br>
if (true) 1 else 2<br>
Note that automatic explicit return only applies to standalone values but not statements.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="debugging-console"></a>Debugging console<a class="hash-link" href="#debugging-console" title="Direct link to heading">#</a></h2><p>A mini console which mirrors the browser console is provided for the simple kind of debugging. To enable it, use the <code>debug = TRUE</code> option in <code>source_r</code> function call. Once enabled, a console will be attached at the top of your <strong>sketch</strong> application. Here is a screenshot (when the <code>print(x)</code> is provided as input):</p><p><img alt="Console for debugging" src="/assets/images/console_error-f5ab4ada4287b153d9e638299ac120fb.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-console"></a>Browser console<a class="hash-link" href="#browser-console" title="Direct link to heading">#</a></h2><p>The most important tool for general debugging is the browser console. It can be accessed by right clicking on the webpage and choosing the &quot;Inspect&quot; item.</p><div class="flex height-30vh justify-center"><img src="/img/chrome_right_click_menu.png"><img src="/img/firefox_right_click_menu.png"></div><div class="text-center mb-18">Screenshot 1: Right-click menus of the Chrome browser and the Firefox browser</div><p>Once the console is opened, one can inspect the HTML elements with the &quot;Elements&quot; and &quot;Styles&quot; tabs and the namespace / variables in the &quot;Console&quot;.</p><p><img src="/assets/images/chrome_console-462272d080ee26f00df4988b9f4004cf.png"></p><div class="text-center">Screenshot 2: the console of the Chrome browser</div><link href="../css/docs-styles.css" rel="stylesheet"></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/kcf-jackson/sketch-website/edit/master/docs/debugging.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Configuration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/manage_assets_and_deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Managing assets and Deployment Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-transpilation-check" class="table-of-contents__link">Pre-transpilation check</a></li><li><a href="#transpilation-warning" class="table-of-contents__link">Transpilation warning</a></li><li><a href="#debugging-console" class="table-of-contents__link">Debugging console</a></li><li><a href="#browser-console" class="table-of-contents__link">Browser console</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/api/">API</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about">About</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/tutorial/">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase/">Showcase</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">News</a></li><li class="footer__item"><a href="https://github.com/kcf-jackson/sketch" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2020-2021 Chun Fung Kwok, Kate Saunders | Apache-2.0 Licensed | Built with Docusaurus</div></div></div></footer></div>
<script src="/assets/js/styles.d666402a.js"></script>
<script src="/assets/js/runtime~main.c1b8fcdf.js"></script>
<script src="/assets/js/main.6fb23e32.js"></script>
<script src="/assets/js/1.601f8a21.js"></script>
<script src="/assets/js/2.f3d55e96.js"></script>
<script src="/assets/js/96.67cd782d.js"></script>
<script src="/assets/js/98.96910ac0.js"></script>
<script src="/assets/js/935f2afb.2c160cd6.js"></script>
<script src="/assets/js/17896441.0a798033.js"></script>
<script src="/assets/js/2bccb399.55198869.js"></script>
</body>
</html>